<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<title>Wholesale Attar Price List | Pristine Perfume Kannauj</title>
<meta name="description" content="Wholesale attar and perfume oil price list from Pristine Perfume, Kannauj. Searchable categories and bulk pricing for retailers across India.">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" href="favicon.png">
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">

<style>
html,body{margin:0;padding:0;width:100%;overflow-x:hidden;}
body{font-family:'Playfair Display', serif;padding-top:56px;background:#fafafa;}

/* NAVBAR */
.navbar{
  position:fixed;top:0;left:0;right:0;
  background:#f8f6f2;
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 20px;z-index:1000;
}
.navbar .logo img{height:36px;}
.nav-row{margin:0 auto;display:flex;justify-content:center;}
.nav-row a{
  position:relative;text-decoration:none;color:#333;
  font-size:15px;padding:6px 22px;white-space:nowrap;
}
.nav-row a.active{border-bottom:2px solid #000;}
.nav-row a:not(:last-child)::after{
  content:"";position:absolute;right:0;top:50%;
  transform:translateY(-50%);height:18px;width:1px;
  background:rgba(0,0,0,.35);
}
@media(max-width:768px){
  body{padding-top:72px}
  .navbar{flex-direction:column;gap:6px;padding:8px 12px}
  .navbar .logo img{height:32px}
  .nav-row{width:100%;max-width:420px;justify-content:space-between;padding:0 6px}
  .nav-row a{flex:1;text-align:center}
}

/* CONTAINER */
.container{max-width:1200px;margin:auto;background:#fff;padding:20px}
h1{text-align:center;margin-bottom:10px}

/* CONTROLS */
.controls{
  display:flex;flex-wrap:wrap;gap:10px;justify-content:center;
  position:sticky;top:70px;background:#fff;padding:10px;z-index:50;
}
input,select{padding:8px 10px;font-size:14px}

/* PRICE FILTER */
.price-filter{
  display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin:10px 0;
}
.price-chips span{
  padding:6px 12px;border:1px solid #ccc;border-radius:20px;
  cursor:pointer;font-size:13px;
}
.price-chips span.active{background:#000;color:#fff;border-color:#000}
.range-box{display:flex;align-items:center;gap:8px;font-size:13px}

/* TABLE */
table{width:100%;border-collapse:collapse;font-family:system-ui}
th,td{border:1px solid #ddd;padding:8px;text-align:center;font-size:14px}
th{background:#111;color:#fff}
tr:nth-child(even){background:#fafafa}

/* MOBILE TABLE */
@media(max-width:768px){
  table,thead,tbody,th,td,tr{display:block}
  tr{margin-bottom:15px}
  td{text-align:right;position:relative;padding-left:50%}
  td::before{content:attr(data-label);position:absolute;left:10px;font-weight:bold}
  th{display:none}
}

/* PAGINATION */
.pagination{
  display:flex;justify-content:center;gap:6px;margin:20px 0;
}
.pagination button{
  padding:6px 10px;border:1px solid #ccc;background:#fff;cursor:pointer
}
.pagination button.active{background:#000;color:#fff}

/* FLOATING WHATSAPP */
.whatsapp-float{
  position:fixed;right:16px;bottom:16px;width:56px;height:56px;
  background:#25D366;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  z-index:2000;
}
.whatsapp-float img{width:38px;height:38px}
</style>
</head>

<body>

<div class="navbar">
  <div class="logo"><a href="./index.html"><img src="logo.png"></a></div>
  <div class="nav-row">
    <a href="./index.html">Home</a>
    <a href="./pricelist.html" class="active">Price List</a>
    <a href="./about.html">About</a>
    <a href="./blog.html">Blog</a>
  </div>
</div>

<div class="container">
<h1>Pristine Perfume – Wholesale Attar Price List</h1>

<div class="controls">
  <input id="search" placeholder="Search fragrance">
  <select id="category"><option value="">All Categories</option></select>
</div>

<div class="price-filter">
  <div class="price-chips">
    <span data-min="0" data-max="500">₹0–500</span>
    <span data-min="500" data-max="1000">₹500–1000</span>
    <span data-min="1000" data-max="2500">₹1000–2500</span>
    <span data-min="2500" data-max="999999">₹2500+</span>
  </div>
  <div class="range-box">
    ₹ <span id="minVal">0</span>
    <input type="range" id="priceRange">
    <span id="maxVal">0</span>
  </div>
</div>

<table id="table"></table>
<div class="pagination" id="pagination"></div>
</div>

<a href="https://wa.me/917985494998" class="whatsapp-float">
  <img src="whatsapp-icon.png">
</a>

<script>
const ROWS = [];
const PER_PAGE = 50;
let curPage = 1;
let maxPrice = 0;
let slider, search, categorySel, pagination;

fetch('pricelist.csv')
.then(r => r.text())
.then(text => {

  const lines = text.trim().split('\n').map(r => r.split(','));
  const headers = lines[0].map(h => h.trim());
  const col = {};
  headers.forEach((h,i)=>col[h.toLowerCase()] = i);

  /* auto-detect columns */
  const categoryKey = Object.keys(col).find(k => k.includes('category'));
  const priceKeys = Object.keys(col).filter(k =>
    k.includes('kg') || k.includes('g')
  );

  const table = document.getElementById('table');
  table.innerHTML =
    '<thead><tr>' +
    headers.filter(h=>!['25 g','50 g'].includes(h.toLowerCase()))
      .map(h=>`<th>${h}</th>`).join('') +
    '</tr></thead><tbody></tbody>';

  const tbody = table.querySelector('tbody');
  const categories = new Set();

  lines.slice(1).forEach(r => {
    if(!r[0]) return;

    let tr = document.createElement('tr');
    let textBlob = '';
    let rowMaxPrice = 0;

    headers.forEach((h,i)=>{
      if(['25 g','50 g'].includes(h.toLowerCase())) return;

      let val = r[i] || '';

      if(priceKeys.includes(h.toLowerCase()) && val){
        const num = parseFloat(val);
        if(!isNaN(num)){
          rowMaxPrice = Math.max(rowMaxPrice, num);
          maxPrice = Math.max(maxPrice, num);
          val = '₹' + num.toLocaleString('en-IN');
        }
      }

      const td = document.createElement('td');
      td.dataset.label = h;
      td.textContent = val;
      tr.appendChild(td);

      textBlob += ' ' + val.replace(/[₹,]/g,'').toLowerCase();
    });

    const cat = categoryKey ? (r[col[categoryKey]] || '').toLowerCase() : '';
    if(cat) categories.add(cat);

    ROWS.push({
      el: tr,
      text: textBlob,
      price: rowMaxPrice,
      category: cat
    });

    tbody.appendChild(tr);
  });

  /* category dropdown */
  categorySel = document.getElementById('category');
  categories.forEach(c=>{
    let o = document.createElement('option');
    o.value = c;
    o.textContent = c;
    categorySel.appendChild(o);
  });

  /* slider setup */
  slider = document.getElementById('priceRange');
  search = document.getElementById('search');
  pagination = document.getElementById('pagination');

  slider.max = maxPrice;
  slider.value = maxPrice;
  document.getElementById('maxVal').textContent = maxPrice;

  let timer;
  function debounce(fn){
    clearTimeout(timer);
    timer = setTimeout(fn,120);
  }

  function render(){
    const q = search.value.toLowerCase();
    const c = categorySel.value;
    const max = +slider.value;

    const filtered = ROWS.filter(r =>
      (!q || r.text.includes(q)) &&
      (!c || r.category === c) &&
      r.price <= max
    );

    const pages = Math.ceil(filtered.length / PER_PAGE);
    pagination.innerHTML = '';

    filtered.forEach((r,i)=>{
      r.el.style.display =
        (i >= (curPage-1)*PER_PAGE && i < curPage*PER_PAGE) ? '' : 'none';
    });

    for(let i=1;i<=pages;i++){
      const b=document.createElement('button');
      b.textContent=i;
      if(i===curPage) b.classList.add('active');
      b.onclick=()=>{curPage=i;render()};
      pagination.appendChild(b);
    }
  }

  search.addEventListener('input', ()=>debounce(()=>{curPage=1;render()}));
  categorySel.addEventListener('change', ()=>{curPage=1;render()});
  slider.addEventListener('input', ()=>{curPage=1;render()});

  document.querySelectorAll('.price-chips span').forEach(s=>{
    s.onclick=()=>{
      document.querySelectorAll('.price-chips span')
        .forEach(x=>x.classList.remove('active'));
      s.classList.add('active');
      slider.value = s.dataset.max;
      document.getElementById('maxVal').textContent = slider.value;
      curPage=1;render();
    };
  });

  render();
});
</script>

</body>
</html>
